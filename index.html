<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ethical Reasoning for the Information Age: The Toulmin Tool</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        textarea { resize: none; }
        *:focus { outline: 3px solid #fbbf24; outline-offset: 2px; }
        .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); border-width: 0; }
        .skip-link { position: absolute; top: -40px; left: 0; background: #000; color: white; padding: 8px; z-index: 100; }
        .skip-link:focus { top: 0; }
    </style>
</head>
<body class="bg-gray-50">
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const generateSessionId = () => {
            const date = new Date();
            const dateStr = date.toISOString().slice(0,10).replace(/-/g, '');
            const timeStr = date.toTimeString().slice(0,5).replace(/:/g, '');
            const random = Math.random().toString(36).substring(2, 8).toUpperCase();
            return `TOULMIN-${dateStr}-${timeStr}-${random}`;
        };

        const PHILOSOPHERS = {
            socrates: {
                name: "Socrates", era: "Ancient Greece (470-399 BCE)", region: "Western", image: "üèõÔ∏è",
                coherenceRequirements: {
                    BRC: { required: true, level: "moderate", note: "Needs emotional regulation for dialectical patience" },
                    KIC: { required: true, level: "high", note: "Examined life requires integrated self-awareness" },
                    CIC: { required: true, level: "very-high", note: "Dialectical reasoning demands high cognitive capacity" },
                    ISC: { required: true, level: "high", note: "Required leisure class and democratic Athens" },
                    TNC: { required: true, level: "moderate", note: "Life-long commitment to questioning" }
                },
                whenWorks: "When you have leisure, education, dialectical partners, and community that values questioning",
                whenFails: "Under cognitive overload, time pressure, authoritarian contexts, or when survival needs dominate",
                model: {
                    IK: "Examined life is the only life worth living; virtue is knowledge",
                    PRS_t: "Ethical questions revealed through dialectical questioning; appearances deceive",
                    SPTS: ["Athenian citizen", "Stonemason's son", "Gadfly of Athens", "Male philosopher"],
                    AH: "Grew up in democratic Athens; experienced Peloponnesian War; questioned sophists; executed by democracy",
                    BROAPlus: "Knowledge through dialogue; definitions must withstand scrutiny; virtue can be taught",
                    Cap: "Capacity for self-examination and moral reasoning present in everyone",
                    Capab: "Elenchus method - systematic questioning to reveal contradictions",
                    Cons: "Dialogical practice; trained students like Plato; method persisted",
                    MetaCons: "Limited - relied on memory of students; no systematic review",
                    Gates: "Required dialectical skill; oral culture; excluded those unable to argue"
                },
                keyInsights: ["Made ethics central to philosophy", "Method over doctrine", "Universal moral knowledge possible through reason"],
                limitations: ["Required leisure and education", "Athenian male perspective", "Oral method meant fragility"],
                whatRevealed: "Power of systematic questioning; ethics as rational inquiry",
                whatExcluded: "Perspectives of women, slaves, non-Greeks; practical wisdom of workers",
                toulminArguments: [{
                    id: "examined-life",
                    claim: "The examined life is the only life worth living",
                    grounds: ["People act on beliefs without questioning", "Unexamined beliefs contain contradictions", "Contradictions lead to harmful actions"],
                    warrant: "If beliefs guide action AND unexamined beliefs may be false, THEN we must examine beliefs to live well",
                    warrantType: "Rational necessity",
                    backing: ["Dialectical method reveals hidden contradictions", "Self-knowledge prerequisite for virtue"],
                    qualifier: "Certainty within rationalist framework",
                    qualifierStrength: 0.95,
                    rebuttals: ["IF wisdom exists beyond rational inquiry", "IF some truths aren't accessible via dialogue"],
                    connectionToModel: { groundsFrom: "PRS_t", warrantFrom: "Capab", backingFrom: "Cons", rebuttalsFrom: "Gates" }
                }]
            },
            aristotle: {
                name: "Aristotle", era: "Ancient Greece (384-322 BCE)", region: "Western", image: "üìñ",
                coherenceRequirements: {
                    BRC: { required: true, level: "high", note: "Emotions must be regulated - doctrine of the mean" },
                    KIC: { required: true, level: "very-high", note: "Virtue as settled character requires integrated identity" },
                    CIC: { required: true, level: "high", note: "Phronesis requires cognitive bandwidth for context-sensitivity" },
                    ISC: { required: true, level: "very-high", note: "Requires polis, community, and leisure" },
                    TNC: { required: true, level: "very-high", note: "Virtue develops across complete life" }
                },
                whenWorks: "When you have stable community, leisure for contemplation, and time for virtue development",
                whenFails: "Under chronic stress, isolation, precarity, time pressure, or institutional betrayal",
                model: {
                    IK: "Human flourishing (eudaimonia) through virtue; teleological nature; golden mean",
                    PRS_t: "Purpose/function reveals proper activity; observation + reason; virtue through habituation",
                    SPTS: ["Greek male", "Macedonian", "Philosopher", "Teacher", "Naturalist"],
                    AH: "Student of Plato; tutor to Alexander; founded Lyceum",
                    BROAPlus: "Empiricism + logic; systematic classification; virtue as excellence of function",
                    Cap: "Humans have natural capacity for reason and virtue",
                    Capab: "Virtue ethics; systematic observation; logical analysis",
                    Cons: "Lyceum as institution; systematic corpus; educational tradition",
                    MetaCons: "Limited - preserved through manuscripts",
                    Gates: "Flourishing = free Greek males with leisure"
                },
                keyInsights: ["Ethics tied to human function", "Virtue developed through practice", "Practical wisdom (phronesis)"],
                limitations: ["Flourishing defined by elite", "Justified slavery/subordination", "Required leisure"],
                whatRevealed: "Virtue ethics as systematic framework; importance of character",
                whatExcluded: "Perspectives of women, slaves, 'barbarians'",
                toulminArguments: [{
                    id: "flourishing-function",
                    claim: "Human flourishing comes from excellent performance of our characteristic function",
                    grounds: ["Every organ/craft has a function", "Excellent performance = virtue", "Humans' function is rational activity"],
                    warrant: "If things flourish by performing functions excellently AND humans' function is reason, THEN flourishing = virtuous rational activity",
                    warrantType: "Teleological reasoning",
                    backing: ["Observation of natural kinds", "Study of virtuous people"],
                    qualifier: "High confidence for those with right nature",
                    qualifierStrength: 0.85,
                    rebuttals: ["IF humans don't have single essential function", "IF flourishing defined by excluded groups"],
                    connectionToModel: { groundsFrom: "PRS_t", warrantFrom: "Capab", backingFrom: "Cons", rebuttalsFrom: "Gates" }
                }]
            },
            maathai: { name: "Wangari Maathai", era: "Contemporary (1940-2011)", region: "Kenya/Africa", image: "üå≥", coherenceRequirements: { BRC: { required: true, level: "high", note: "Activism requires resilience" }, KIC: { required: true, level: "high", note: "Identity as African woman environmentalist" }, CIC: { required: true, level: "moderate", note: "Connections grounded in practice" }, ISC: { required: true, level: "very-high", note: "Requires community organizing" }, TNC: { required: true, level: "high", note: "Multi-generational commitment" } }, whenWorks: "When community organizing is possible, indigenous knowledge valued", whenFails: "Under authoritarian repression, when local knowledge excluded", model: { IK: "Environmental destruction is human rights issue", PRS_t: "Sees connections: deforestation ‚Üí poverty ‚Üí oppression", SPTS: ["Kenyan woman", "Kikuyu", "Scientist", "Activist"], AH: "Colonial Kenya; US education; imprisonment", BROAPlus: "Indigenous knowledge + Western science", Cap: "Women have capacity for stewardship", Capab: "Community tree-planting; linking local to systemic", Cons: "Green Belt Movement", MetaCons: "Movement adapted: trees ‚Üí democracy ‚Üí peace", Gates: "Challenged elite/expert domains" }, keyInsights: ["Environment and oppression connected", "Local action as political organizing"], limitations: [" faced government repression", "Gender-based organizing challenges"], whatRevealed: "Environmental ethics from African women's standpoint", whatExcluded: "Western 'wilderness' preservation", toulminArguments: [{ id: "env-justice", claim: "Environmental degradation is a rights and democracy issue", grounds: ["Deforestation increases women's labor", "Decisions made without women", "Suppression linked to control"], warrant: "IF degradation harms women AND women excluded AND movements challenge power, THEN env justice = rights + democracy", warrantType: "Intersectional analysis", backing: ["Green Belt outcomes", "Link between restoration and empowerment"], qualifier: "High confidence from lived experience", qualifierStrength: 0.88, rebuttals: ["IF women's roles essentialized", "IF local knowledge insufficient"], connectionToModel: { groundsFrom: "PRS_t", warrantFrom: "Capab", backingFrom: "Cons", rebuttalsFrom: "Gates" } }] },
            mandela: { name: "Nelson Mandela", era: "Contemporary (1918-2013)", region: "South Africa", image: "üïäÔ∏è", coherenceRequirements: { BRC: { required: true, level: "very-high", note: "Avoiding revenge requires regulation" }, KIC: { required: true, level: "high", note: "Ubuntu identity" }, CIC: { required: true, level: "moderate", note: "Truth-telling grounded in Ubuntu" }, ISC: { required: true, level: "very-high", note: "TRC framework" }, TNC: { required: true, level: "very-high", note: "Nation-building takes time" } }, whenWorks: "When institutional support for truth-telling exists", whenFails: "When punitive justice demanded", model: { IK: "Ubuntu - 'I am because we are'", PRS_t: "Possibility of reconciliation over revenge", SPTS: ["Black South African", "Xhosa", "Lawyer", "Prisoner", "President"], AH: "Apartheid; Robben Island; transition", BROAPlus: "Ubuntu + Western law + Non-violence", Cap: "Oppressors can transform", Capab: "Truth and Reconciliation process", Cons: "TRC; Constitution", MetaCons: "TRC as review mechanism", Gates: "Challenged punitive justice" }, keyInsights: ["Restorative justice", "Ubuntu relational ontology"], limitations: ["Insufficient material reparations", "Economic apartheid persisted"], whatRevealed: "Alternative justice model; dignity-based", whatExcluded: "Western punitive models", toulminArguments: [{ id: "ubuntu", claim: "Reconciliation requires truth and dignity, not retribution", grounds: ["Post-apartheid choice", "Ubuntu philosophy", "Perpetrators also dehumanized"], warrant: "IF persons are relational (Ubuntu) AND systems dehumanize all, THEN justice = restoration of dignity", warrantType: "Ubuntu/Pragmatic", backing: ["TRC model", "Constitution", "Avoided civil war"], qualifier: "Qualified by economic injustice", qualifierStrength: 0.78, rebuttals: ["IF justice requires punishment", "IF reparations necessary"], connectionToModel: { groundsFrom: "PRS_t", warrantFrom: "Capab", backingFrom: "Cons", rebuttalsFrom: "MetaCons" } }] },
            simpson: { name: "Leanne Betasamosake Simpson", era: "Contemporary", region: "Michi Saagiig Nishnaabeg", image: "üå≤", coherenceRequirements: { BRC: { required: true, level: "moderate", note: "Land-based regulation" }, KIC: { required: true, level: "very-high", note: "Identity tethered to land" }, CIC: { required: true, level: "moderate", note: "Embodied/seasonal knowledge" }, ISC: { required: true, level: "very-high", note: "Requires land access" }, TNC: { required: true, level: "very-high", note: "Intergenerational transmission" } }, whenWorks: "When land access secured, Indigenous governance respected", whenFails: "Under colonial dispossession", model: { IK: "Knowledge lives in land-practice", PRS_t: "Knowledge as seasonal/relational", SPTS: ["Nishnaabeg woman", "Scholar", "Land defender"], AH: "Colonial disruption; resurgence", BROAPlus: "Nishnaabeg cosmology + critical theory", Cap: "Indigenous practices are sophisticated systems", Capab: "Land-based education; storytelling", Cons: "Community learning; ceremony", MetaCons: "Resurgence as continuous adaptation", Gates: "Challenged text-based validity" }, keyInsights: ["Place-based rigor", "Resurgence vs reconciliation"], limitations: ["Requires land access", "Appropriation risks"], whatRevealed: "Non-textual epistemologies", whatExcluded: "Abstract universality", toulminArguments: [{ id: "land-pedagogy", claim: "Valid knowledge can be place-based and relational", grounds: ["transmitted for millennia", "Seasonal rounds encode knowledge", "Language carries worldview"], warrant: "IF knowledge encoded in practice/place AND systems sustained communities, THEN valid knowledge = land-tethered intelligence", warrantType: "Indigenous epistemology", backing: ["Intergenerational transmission", "Resurgence vitality"], qualifier: "Certain within Nishnaabeg framework", qualifierStrength: 0.92, rebuttals: ["IF land access impossible", "IF text required for validity"], connectionToModel: { groundsFrom: "PRS_t", warrantFrom: "Capab", backingFrom: "Cons", rebuttalsFrom: "Gates" } }] },
            collins: { name: "Patricia Hill Collins", era: "Contemporary", region: "USA", image: "üìö", coherenceRequirements: { BRC: { required: true, level: "moderate", note: "Resilience under marginalization" }, KIC: { required: true, level: "high", note: "Outsider-within status" }, CIC: { required: true, level: "high", note: "Intersectional analysis" }, ISC: { required: true, level: "high", note: "Space for Black feminist thought" }, TNC: { required: true, level: "moderate", note: "Tradition across generations" } }, whenWorks: "When marginalized standpoints valued", whenFails: "When objectivity = detachment", model: { IK: "Intersectionality reveals matrix of domination", PRS_t: "Race/gender/class interact multiplicatively", SPTS: ["Black woman", "Sociologist", "Academic"], AH: "outsider-within experience", BROAPlus: "Standpoint epistemology; ethics of care", Cap: "Black women have distinctive standpoint", Capab: "Standpoint methodology; intersectional analysis", Cons: "Black feminist intellectual tradition", MetaCons: "Intersectionality adapted to multiple axes", Gates: "Challenged abstract objectivity" }, keyInsights: ["Standpoint matters", "Intersectionality", "Concrete experience as evidence"], limitations: ["Risk of essentialism", "Cooptation risks"], whatRevealed: "Matrix of domination", whatExcluded: "Traditional epistemology", toulminArguments: [{ id: "standpoint", claim: "Marginalized standpoints generate distinctive knowledge", grounds: ["Intersection makes patterns visible", "Outsider-within perspective", "Dominant groups unmarked"], warrant: "IF sight depends on standing AND marginalization reveals oppression, THEN standpoint reveals truths invisible to privilege", warrantType: "Standpoint epistemology", backing: ["Black feminist tradition", "Empirical confirmation"], qualifier: "Strong confidence", qualifierStrength: 0.87, rebuttals: ["IF standpoint essentializes", "IF situated knowledge is 'subjective'"], connectionToModel: { groundsFrom: "PRS_t", warrantFrom: "Capab", backingFrom: "Cons", rebuttalsFrom: "MetaCons" } }] },
            augustine: { name: "Augustine", era: "Late Antiquity", region: "North Africa", image: "‚õ™", coherenceRequirements: { BRC: { required: true, level: "moderate", note: "Grace regulates will" }, KIC: { required: true, level: "high", note: "Conversion integrates self" }, CIC: { required: true, level: "high", note: "Theological reasoning" }, ISC: { required: true, level: "very-high", note: "Requires Church" }, TNC: { required: true, level: "very-high", note: "Eschatological timeline" } }, whenWorks: "Within Christian community", whenFails: "For non-Christians", model: { IK: "Love God above all; original sin", PRS_t: "Humans fallen; will divided", SPTS: ["Bishop", "Former Manichaean", "Roman elite"], AH: "Conversion; Roman decline", BROAPlus: "Revelation + Neoplatonism", Cap: "Capacity for God-love via grace", Capab: "Confession; theology", Cons: "Church hierarchy; doctrine", MetaCons: "Limited - councils", Gates: "Requires faith" }, keyInsights: ["Psychology of will", "Ethics requires grace"], limitations: ["Excludes non-Christians", "Justified inequality"], whatRevealed: "Inner moral struggle", whatExcluded: "Naturalistic morality", toulminArguments: [{ id: "grace", claim: "Virtue impossible without grace", grounds: ["Humans fail despite intentions", "Will divided", "Original sin"], warrant: "IF nature corrupted AND virtue requires God-orientation, THEN grace necessary", warrantType: "Theological necessity", backing: ["Scripture", "Tradition", "Experience"], qualifier: "Certain within faith", qualifierStrength: 0.98, rebuttals: ["IF naturalism works", "IF non-Christians virtuous"], connectionToModel: { groundsFrom: "PRS_t", warrantFrom: "Capab", backingFrom: "Cons", rebuttalsFrom: "Gates" } }] },
            hume: { name: "David Hume", era: "Enlightenment", region: "Scotland", image: "üé≠", coherenceRequirements: { BRC: { required: true, level: "high", note: "Sentiment is emotional" }, KIC: { required: true, level: "moderate", note: "Stable sentiments" }, CIC: { required: true, level: "high", note: "Empirical observation" }, ISC: { required: true, level: "moderate", note: "Social stability" }, TNC: { required: true, level: "low", note: "Present sentiment" } }, whenWorks: "When sympathy extends, customs stable", whenFails: "When sympathy blocked", model: { IK: "Morality grounded in sentiment", PRS_t: "Judgments are feelings approved by sympathy", SPTS: ["Scottish intellectual", "Skeptic", "Male"], AH: "Enlightenment; rejected religion", BROAPlus: "Empiricism; custom", Cap: "Capacity for sympathy", Capab: "Analysis of sentiment", Cons: "Empiricist methodology", MetaCons: "Reflection on custom", Gates: "Universal human nature assumed" }, keyInsights: ["Is/Ought gap", "Sympathy grounds ethics"], limitations: ["Assumes universal nature", "Sympathy limits"], whatRevealed: "Role of emotion", whatExcluded: "Structural injustice", toulminArguments: [{ id: "sentiment", claim: "Morality grounded in sentiment not reason", grounds: ["Reason is inert", "Morality motivates", "Ought distinct from Is"], warrant: "IF morality motivates AND reason doesn't, THEN morality is sentiment", warrantType: "Empirical/Conceptual", backing: ["Psychology", "Observation"], qualifier: "High confidence", qualifierStrength: 0.88, rebuttals: ["IF reason motivates", "IF morality cognitive"], connectionToModel: { groundsFrom: "PRS_t", warrantFrom: "Capab", backingFrom: "Cons", rebuttalsFrom: "Gates" } }] },
            kant: { name: "Immanuel Kant", era: "Enlightenment", region: "Prussia", image: "üìè", coherenceRequirements: { BRC: { required: true, level: "low", note: "Duty over inclination" }, KIC: { required: true, level: "high", note: "Rational autonomy" }, CIC: { required: true, level: "very-high", note: "Categorical imperative" }, ISC: { required: true, level: "moderate", note: "Education" }, TNC: { required: true, level: "moderate", note: "Timeless law" } }, whenWorks: "High cognitive capacity, rational conditions", whenFails: "Cognitive overload, stress", model: { IK: "Universal law; humanity as end", PRS_t: "Duty from reason, not feeling", SPTS: ["Prussian academic", "Protestant"], AH: "Pietist; academic", BROAPlus: "Reason universal/autonomous", Cap: "Rational beings have dignity", Capab: "Critical philosophy; CI", Cons: "Deontology", MetaCons: "Reason self-corrects", Gates: "Rationality defined by elite males" }, keyInsights: ["Universal principles", "Dignity of autonomy"], limitations: ["Formalism ignores conditions", " exclusionary rationality"], whatRevealed: "Dignity; universality", whatExcluded: "Emotion; particularity", toulminArguments: [{ id: "ci", claim: "Act only on universalizable maxims", grounds: ["Action based on principle", "Law must be universal", "Hypothetical imperatives not moral"], warrant: "IF morality universal AND only reason grounds universality, THEN act on universalizable maxims", warrantType: "Transcendental", backing: ["Reason's self-legislation", "Dignity"], qualifier: "Apodictic certainty", qualifierStrength: 0.99, rebuttals: ["IF persons relational", "IF particularism true"], connectionToModel: { groundsFrom: "PRS_t", warrantFrom: "Capab", backingFrom: "Cons", rebuttalsFrom: "Gates" } }] },
            bentham: { name: "Jeremy Bentham", era: "Enlightenment", region: "England", image: "‚öñÔ∏è", coherenceRequirements: { BRC: { required: true, level: "low", note: "Pleasure/pain basic" }, KIC: { required: true, level: "low", note: "Preferences primary" }, CIC: { required: true, level: "very-high", note: "Felicific calculus" }, ISC: { required: true, level: "high", note: "Reform structures" }, TNC: { required: true, level: "moderate", note: "Consequences" } }, whenWorks: "Measurable outcomes, clear preferences", whenFails: "Incommensurable values, rights violations", model: { IK: "Greatest happiness", PRS_t: "Maximize utility", SPTS: ["Reformer", "Utilitarian"], AH: "Legal reform; industrial revolution", BROAPlus: "Empiricism + quantification", Cap: "Sentience = moral standing", Capab: "Felicific calculus", Cons: "Utilitarianism; reform", MetaCons: "Calculus as review", Gates: "Quantifiable outcomes privileged" }, keyInsights: ["Egalitarianism", "Animal welfare"], limitations: ["Aggregation risks", "Incommensurability"], whatRevealed: "Consequences matter", whatExcluded: "Rights; relationships", toulminArguments: [{ id: "utility", claim: "Right action promotes happiness", grounds: ["Nature placed us under pleasure/pain", "Action motivated by pleasure"], warrant: "IF pleasure governs action AND good is happiness, THEN right = max happiness", warrantType: "Empirical/Definitional", backing: ["Psychology", "Calculus"], qualifier: "High confidence", qualifierStrength: 0.87, rebuttals: ["IF pleasures incommensurable", "IF rights constrain"], connectionToModel: { groundsFrom: "PRS_t", warrantFrom: "Capab", backingFrom: "Cons", rebuttalsFrom: "Gates" } }] },
            nussbaum: { name: "Martha Nussbaum", era: "Contemporary", region: "USA", image: "üåç", coherenceRequirements: { BRC: { required: true, level: "moderate", note: "Bodily integrity" }, KIC: { required: true, level: "moderate", note: "Integrated capabilities" }, CIC: { required: true, level: "high", note: "Interdisciplinary" }, ISC: { required: true, level: "very-high", note: "Support required" }, TNC: { required: true, level: "moderate", note: "Lifespan" } }, whenWorks: "Institutional support, material conditions", whenFails: "Parochial list, structural barriers", model: { IK: "Capabilities basis of justice", PRS_t: "Justice = threshold capabilities", SPTS: ["Philosopher", "Feminist"], AH: "Classics; development", BROAPlus: "Aristotle + Liberalism + Feminism", Cap: "Latent capabilities", Capab: "Capabilities approach", Cons: "UN framework; feminism", MetaCons: "List revision", Gates: "Includes emotion/body" }, keyInsights: ["What people can do/be", "Emotions central"], limitations: ["Western bias", "Universalism tensions"], whatRevealed: "Material conditions for flourishing", whatExcluded: "Radical critique", toulminArguments: [{ id: "capabilities", claim: "Justice requires ensuring threshold capabilities", grounds: ["Functionings depend on capabilities", "Context matters", "Aggregation sacrifices individuals"], warrant: "IF justice about doing/being AND context varies, THEN justice = ensuring capabilities", warrantType: "Normative/Empirical", backing: ["Sen", "Aristotle", "Feminism"], qualifier: "High confidence", qualifierStrength: 0.86, rebuttals: ["IF list parochial", "IF liberal framework inadequate"], connectionToModel: { groundsFrom: "PRS_t", warrantFrom: "Capab", backingFrom: "Cons", rebuttalsFrom: "MetaCons" } }] },
            confucius: { name: "Confucius", era: "Ancient China", region: "East Asia", image: "üèÆ", coherenceRequirements: { BRC: { required: true, level: "high", note: "Ritual cultivation" }, KIC: { required: true, level: "very-high", note: "Relational roles" }, CIC: { required: true, level: "moderate", note: "Analogical reasoning" }, ISC: { required: true, level: "very-high", note: "Social hierarchy" }, TNC: { required: true, level: "very-high", note: "Tradition" } }, whenWorks: "Stable social order, accepted hierarchy", whenFails: "Oppressive hierarchy, radical change", model: { IK: "Harmony via ritual/ren", PRS_t: "Social harmony through roles", SPTS: ["Scholar", "Teacher"], AH: "Warring States", BROAPlus: "Relational ontology", Cap: "Capacity for ren", Capab: "Ritual; exemplary teaching", Cons: "Civil service; classics", MetaCons: "Interpretation", Gates: "Patriarchy" }, keyInsights: ["Relational ethics", "Virtue via ritual"], limitations: ["Rigid hierarchy", "Subordination of women"], whatRevealed: "Relational personhood", whatExcluded: "Individual rights", toulminArguments: [{ id: "ritual", claim: "Ethical life requires ritual propriety in roles", grounds: ["Society is network", "Chaos from role failure", "Observation"], warrant: "IF persons relational AND harmony requires coordination, THEN ethics = ritual propriety", warrantType: "Relational/Historical", backing: ["Classics", "Exemplars"], qualifier: "Certain within framework", qualifierStrength: 0.94, rebuttals: ["IF individual rights exist", "IF hierarchy oppressive"], connectionToModel: { groundsFrom: "PRS_t", warrantFrom: "Capab", backingFrom: "Cons", rebuttalsFrom: "Gates" } }] }
        };

        // ============================================================================
        // META CASE STUDY - EXTRACTED COMPONENTS (PREVENTS FOCUS LOSS)
        // ============================================================================

        const MetaBackgroundPhase = () => (
            <div className="space-y-6">
                <div className="bg-gradient-to-br from-red-100 to-orange-100 border-2 border-red-400 rounded-lg p-6">
                    <h3 className="text-2xl font-bold text-red-900 mb-4">üì± A Real-World Case You Know</h3>
                    <p className="text-gray-700 mb-4">In 2021, whistleblower <strong>Frances Haugen</strong> testified before the U.S. Congress, revealing Meta's internal research showing that:</p>
                    <ul className="space-y-2 text-gray-700 mb-4">
                        <li>‚Ä¢ <strong>Instagram worsened body image issues</strong> for adolescent girls</li>
                        <li>‚Ä¢ Harms were <strong>mechanistically linked to engagement features</strong></li>
                        <li>‚Ä¢ <strong>Executives knew</strong> but chose profit over safety</li>
                    </ul>
                </div>
                <div className="bg-purple-50 border-2 border-purple-300 rounded-lg p-6">
                    <h4 className="font-bold text-purple-900 mb-3">The Coherence Framework Applied</h4>
                    <p className="text-gray-700"><strong>Coherence analysis asks:</strong> "Which coherence dimensions does Instagram systematically compromise? Can meaningful consent exist when the conditions for reflective choice are being degraded?"</p>
                </div>
            </div>
        );

        const MetaDimensionPhase = ({ dimensionAnalysis, setDimensionAnalysis }) => {
            const dimensions = [
                { id: 'BRC', name: 'Biological-Regulatory', icon: 'ü´Ä', desc: 'Sleep, stress, regulation', evidence: 'Increased anxiety/depression correlated with usage' },
                { id: 'CIC', name: 'Cognitive-Informational', icon: 'üß†', desc: 'Mental bandwidth, focus', evidence: 'Algorithm maximizes salience over meaning' },
                { id: 'KIC', name: 'Kernel Identity', icon: 'üé≠', desc: 'Integrated self', evidence: 'Alienation from own body/identity' },
                { id: 'TNC', name: 'Temporal-Narrative', icon: '‚è≥', desc: 'Long-term thinking', evidence: 'Users unable to stop despite wanting to' },
                { id: 'ISC', name: 'Institutional-Structural', icon: 'üèõÔ∏è', desc: 'Supportive institutions', evidence: 'Executives chose profit over well-being' }
            ];

            return (
                <div className="space-y-6">
                    <div className="bg-purple-50 border-2 border-purple-300 rounded-lg p-6">
                        <h3 className="text-xl font-bold text-purple-900">Analyze Each Dimension</h3>
                        <p className="text-gray-700">Identify how Meta compromises these capacities.</p>
                    </div>
                    {dimensions.map(d => {
                        const isAnalyzed = dimensionAnalysis[d.id] !== undefined;
                        const isCompromised = dimensionAnalysis[d.id] === true;
                        return (
                            <div key={d.id} className="bg-white border-2 border-gray-300 rounded-lg p-6">
                                <div className="flex justify-between items-center mb-4">
                                    <div className="flex items-center space-x-3"><span className="text-4xl">{d.icon}</span><div><h4 className="text-lg font-bold text-gray-900">{d.name}</h4></div></div>
                                    {isAnalyzed && <span className={`px-3 py-1 rounded font-bold ${isCompromised ? 'bg-red-100 text-red-900' : 'bg-green-100 text-green-900'}`}>{isCompromised ? 'Compromised' : 'Intact'}</span>}
                                </div>
                                {!isAnalyzed ? (
                                    <button onClick={() => setDimensionAnalysis({...dimensionAnalysis, [d.id]: true})} className="w-full py-2 bg-purple-600 text-white rounded hover:bg-purple-700">Analyze</button>
                                ) : (
                                    <div className="space-y-2">
                                        <p className="text-sm"><strong>Evidence:</strong> {d.evidence}</p>
                                        <div className="flex space-x-4">
                                            <button onClick={() => setDimensionAnalysis({...dimensionAnalysis, [d.id]: true})} className="flex-1 py-2 bg-red-600 text-white rounded">Compromised</button>
                                            <button onClick={() => setDimensionAnalysis({...dimensionAnalysis, [d.id]: false})} className="flex-1 py-2 bg-green-600 text-white rounded">Intact</button>
                                        </div>
                                    </div>
                                )}
                            </div>
                        );
                    })}
                </div>
            );
        };

        const MetaToulminPhase = ({ toulminConstruction, setToulminConstruction }) => {
            return (
                <div className="space-y-6">
                    <div className="bg-blue-50 border-2 border-blue-300 rounded-lg p-6">
                        <h3 className="text-xl font-bold text-blue-900">Build Meta's Argument</h3>
                        <p className="text-gray-700">Reconstruct the implicit argument Meta makes.</p>
                    </div>
                    <div className="bg-white border-2 border-blue-300 rounded-lg p-6">
                        <h4 className="font-bold text-blue-900 mb-2">üìç CLAIM (Implicit)</h4>
                        <textarea className="w-full p-3 border rounded" rows="3" value={toulminConstruction.claim} onChange={(e) => setToulminConstruction({...toulminConstruction, claim: e.target.value})} placeholder="Example: It is ethically permissible to maximize engagement..." />
                    </div>
                    {toulminConstruction.claim.length > 20 && (
                        <div className="animate-in fade-in space-y-4">
                            <div className="bg-white border-2 border-green-300 rounded-lg p-6">
                                <h4 className="font-bold text-green-900 mb-2">üîç GROUNDS</h4>
                                {['Users sign up voluntarily', 'Terms are public', 'Platform provides value'].map(g => (
                                    <label key={g} className="flex items-center space-x-2"><input type="checkbox" checked={toulminConstruction.grounds.includes(g)} onChange={(e) => { const newG = e.target.checked ? [...toulminConstruction.grounds, g] : toulminConstruction.grounds.filter(x => x !== g); setToulminConstruction({...toulminConstruction, grounds: newG}); }} /><span>{g}</span></label>
                                ))}
                            </div>
                            <div className="bg-white border-2 border-purple-300 rounded-lg p-6">
                                <h4 className="font-bold text-purple-900 mb-2">üîó WARRANT</h4>
                                <textarea className="w-full p-3 border rounded" rows="2" value={toulminConstruction.warrant} onChange={(e) => setToulminConstruction({...toulminConstruction, warrant: e.target.value})} placeholder="Logic connecting grounds to claim..." />
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const MetaPersonalPhase = ({ personalAssessment, setPersonalAssessment }) => (
            <div className="space-y-6">
                <div className="bg-yellow-50 border-2 border-yellow-400 rounded-lg p-6"><h3 className="text-xl font-bold text-yellow-900">Assess YOUR Coherence</h3></div>
                <div className="bg-white p-6 border rounded-lg">
                    <h4 className="font-bold mb-3">Select Platform:</h4>
                    <div className="flex flex-wrap gap-2">
                        {['Instagram', 'TikTok', 'X/Twitter', 'Snapchat'].map(p => (
                            <button key={p} onClick={() => setPersonalAssessment({...personalAssessment, platform: p})} className={`px-4 py-2 rounded border ${personalAssessment.platform === p ? 'bg-purple-600 text-white' : 'bg-gray-100'}`}>{p}</button>
                        ))}
                    </div>
                </div>
                {personalAssessment.platform && (
                    <div className="space-y-4">
                        {['BRC', 'CIC', 'KIC', 'TNC', 'ISC'].map(dim => (
                            <div key={dim} className="bg-gray-50 p-4 rounded border">
                                <div className="flex justify-between mb-2"><span className="font-bold">{dim}</span><span className="font-bold text-purple-600">{personalAssessment[dim]}</span></div>
                                <input type="range" min="1" max="5" value={personalAssessment[dim]} onChange={(e) => setPersonalAssessment({...personalAssessment, [dim]: parseInt(e.target.value)})} className="w-full" />
                            </div>
                        ))}
                    </div>
                )}
            </div>
        );

        const MetaSynthesisPhase = ({ showBiologicalAnalogue, setShowBiologicalAnalogue }) => (
            <div className="space-y-6">
                <div className="bg-gradient-to-br from-purple-100 to-blue-100 border-2 border-purple-400 rounded-lg p-6">
                    <h3 className="text-2xl font-bold text-purple-900 mb-4">Targeting Coherence</h3>
                    <ul className="list-disc pl-5 space-y-2 text-gray-800">
                        <li><strong>Systematic Extraction:</strong> Meta compromised all 5 dimensions.</li>
                        <li><strong>The "Voluntary" Trap:</strong> You cannot meaningfully consent with compromised coherence.</li>
                    </ul>
                </div>
                <button onClick={() => setShowBiologicalAnalogue(!showBiologicalAnalogue)} className="w-full py-3 bg-indigo-600 text-white rounded hover:bg-indigo-700">{showBiologicalAnalogue ? 'Hide' : 'Show'} Advanced Analogue</button>
                {showBiologicalAnalogue && (
                    <div className="bg-indigo-50 p-4 rounded border-l-4 border-indigo-600">
                        <h4 className="font-bold text-indigo-900">Agency Hijacking in Nature</h4>
                        <p className="text-sm mt-2">Just as the Horsehair worm reprograms a cricket's valuation system to seek water, social media reprograms human valuation systems to seek engagement.</p>
                    </div>
                )}
            </div>
        );

        function MetaCaseSection({ onComplete, onNext }) {
            const [currentPhase, setCurrentPhase] = useState(0);
            const [dimensionAnalysis, setDimensionAnalysis] = useState({});
            const [toulminConstruction, setToulminConstruction] = useState({ claim: '', grounds: [], warrant: '', backing: '', rebuttals: [] });
            const [personalAssessment, setPersonalAssessment] = useState({ BRC: 3, KIC: 3, CIC: 3, ISC: 3, TNC: 3, platform: '' });
            const [showBiologicalAnalogue, setShowBiologicalAnalogue] = useState(false);

            const phases = [
                { id: 'background', title: 'The Case', canProgress: true },
                { id: 'dimensions', title: 'Analysis', canProgress: () => ['BRC', 'KIC', 'CIC', 'ISC', 'TNC'].every(d => dimensionAnalysis[d] !== undefined) },
                { id: 'toulmin', title: 'Argument', canProgress: () => toulminConstruction.claim.length > 20 },
                { id: 'personal', title: 'Application', canProgress: () => personalAssessment.platform && ['BRC', 'KIC', 'CIC', 'ISC', 'TNC'].every(d => personalAssessment[d] !== undefined) },
                { id: 'synthesis', title: 'Synthesis', canProgress: true }
            ];

            const canProgressPhase = () => {
                const p = phases[currentPhase];
                return typeof p.canProgress === 'function' ? p.canProgress() : p.canProgress;
            };

            return (
                <div className="bg-white rounded-lg shadow-lg p-8">
                    <h2 className="text-3xl font-bold text-gray-900 mb-4">Case Study: Meta & Coherence Extraction</h2>
                    <div className="flex space-x-2 mb-6 overflow-x-auto pb-2">
                        {phases.map((p, i) => (
                            <button key={i} onClick={() => currentPhase > i && setCurrentPhase(i)} disabled={currentPhase < i} className={`flex-1 px-3 py-2 rounded-lg text-sm font-semibold transition-colors ${currentPhase === i ? 'bg-purple-600 text-white' : currentPhase > i ? 'bg-green-100 text-green-800' : 'bg-gray-200 text-gray-400'}`}>{currentPhase > i && '‚úì '} {p.title}</button>
                        ))}
                    </div>
                    <div className="mb-8 min-h-[400px]">
                        {currentPhase === 0 && <MetaBackgroundPhase />}
                        {currentPhase === 1 && <MetaDimensionPhase dimensionAnalysis={dimensionAnalysis} setDimensionAnalysis={setDimensionAnalysis} />}
                        {currentPhase === 2 && <MetaToulminPhase toulminConstruction={toulminConstruction} setToulminConstruction={setToulminConstruction} />}
                        {currentPhase === 3 && <MetaPersonalPhase personalAssessment={personalAssessment} setPersonalAssessment={setPersonalAssessment} />}
                        {currentPhase === 4 && <MetaSynthesisPhase showBiologicalAnalogue={showBiologicalAnalogue} setShowBiologicalAnalogue={setShowBiologicalAnalogue} />}
                    </div>
                    <div className="flex justify-between pt-4 border-t">
                        <button onClick={() => setCurrentPhase(Math.max(0, currentPhase - 1))} disabled={currentPhase === 0} className="px-6 py-2 rounded-lg font-semibold bg-gray-300 hover:bg-gray-400 disabled:opacity-50">‚Üê Previous</button>
                        {currentPhase < phases.length - 1 ? (
                            <button onClick={() => canProgressPhase() && setCurrentPhase(currentPhase + 1)} disabled={!canProgressPhase()} className={`px-6 py-2 rounded-lg font-semibold ${canProgressPhase() ? 'bg-purple-600 text-white hover:bg-purple-700' : 'bg-gray-300 text-gray-500'}`}>Next ‚Üí</button>
                        ) : (
                            <button onClick={() => { onComplete(); onNext(); }} className="px-6 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700">Continue ‚Üí</button>
                        )}
                    </div>
                </div>
            );
        }

        // ============================================================================
        // END META CASE STUDY
        // ============================================================================

        function NotationSection({ onComplete, onNext }) {
            const [currentStep, setCurrentStep] = useState(0);

            const steps = [
                {
                    title: "Agent Structure",
                    content: "Every agent: a = ‚ü®IK, PRS_t, SPTS, AH, BROA+, Cap, Capab, Cons, MetaCons‚ü©",
                    components: [
                        { symbol: "IK", name: "Identity Kernel", desc: "Core non-negotiable commitments" },
                        { symbol: "PRS_t", name: "Phenomenal Reference Space", desc: "What's visible/legible now" },
                        { symbol: "SPTS", name: "Standpoint Set", desc: "Situated perspectives agent can occupy" },
                        { symbol: "AH", name: "Assembly History", desc: "How past experiences shape current filters" },
                        { symbol: "BROA+", name: "Beliefs-Rules-Ontology-Authenticity", desc: "Filters shaping interpretation" },
                        { symbol: "Cap", name: "Capacities", desc: "Latent abilities" },
                        { symbol: "Capab", name: "Capabilities", desc: "Reliable methods" },
                        { symbol: "Cons", name: "Constructors", desc: "Procedures that persist" },
                        { symbol: "MetaCons", name: "Meta-Constructors", desc: "Learning loops" }
                    ]
                },
                {
                    title: "World Structure",
                    content: "World: W_t = ‚ü®Ctx_t, Cons, MetaCons, G‚ü©",
                    components: [
                        { symbol: "Ctx_t", name: "Context", desc: "Current social/epistemic contexts" },
                        { symbol: "Cons", name: "Constructors", desc: "Institutional procedures" },
                        { symbol: "MetaCons", name: "Meta-Constructors", desc: "Review/repair mechanisms" },
                        { symbol: "G", name: "Gates", desc: "What counts as evidence/voice/standing" }
                    ]
                },
                {
                    title: "Why This Notation Matters",
                    content: "This lets us compare thinkers systematically, identify intervention points, and design better systems.",
                    example: "Aristotle's G (gates) excluded women/slaves. Intervention: Add MetaCons that include excluded SPTS."
                }
            ];

            return (
                <div className="bg-white rounded-lg shadow-lg p-8">
                    <h2 className="text-3xl font-bold text-gray-900 mb-4">FAIM-QIRF Notation Tutorial</h2>

                    <div className="flex space-x-2 mb-4" role="tablist" aria-label="Notation steps">
                        {steps.map((step, idx) => (
                            <button
                                key={idx}
                                role="tab"
                                aria-selected={currentStep === idx}
                                aria-controls={`step-panel-${idx}`}
                                id={`step-tab-${idx}`}
                                onClick={() => setCurrentStep(idx)}
                                className={`px-4 py-2 rounded-lg font-semibold transition-colors ${
                                    currentStep === idx ? 'bg-purple-600 text-white' : 'bg-gray-200 hover:bg-gray-300'
                                }`}
                            >
                                Step {idx + 1}
                            </button>
                        ))}
                    </div>

                    <div 
                        role="tabpanel" 
                        id={`step-panel-${currentStep}`}
                        aria-labelledby={`step-tab-${currentStep}`}
                        className="bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-purple-200 rounded-lg p-6 mb-6"
                    >
                        <h3 className="text-2xl font-bold text-purple-900 mb-4">{steps[currentStep].title}</h3>
                        <p className="text-gray-700 mb-6">{steps[currentStep].content}</p>

                        {steps[currentStep].components && (
                            <div className="space-y-3">
                                {steps[currentStep].components.map((comp, idx) => (
                                    <div key={idx} className="bg-white p-4 rounded-lg shadow">
                                        <div className="flex items-start">
                                            <div className="bg-purple-100 text-purple-900 font-mono font-bold px-3 py-1 rounded text-sm mr-4">
                                                {comp.symbol}
                                            </div>
                                            <div className="flex-1">
                                                <p className="font-semibold text-gray-900">{comp.name}</p>
                                                <p className="text-sm text-gray-600 mt-1">{comp.desc}</p>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}

                        {steps[currentStep].example && (
                            <div className="bg-yellow-50 border-l-4 border-yellow-500 p-4 mt-6">
                                <p className="text-sm text-gray-700">{steps[currentStep].example}</p>
                            </div>
                        )}
                    </div>

                    <div className="flex justify-between">
                        <button
                            onClick={() => setCurrentStep(Math.max(0, currentStep - 1))}
                            disabled={currentStep === 0}
                            aria-label="Previous step"
                            className={`px-4 py-2 rounded-lg font-semibold transition-colors ${
                                currentStep === 0 ? 'bg-gray-200 text-gray-400 cursor-not-allowed' : 'bg-gray-300 hover:bg-gray-400'
                            }`}
                        >
                            ‚Üê Previous
                        </button>
                        {currentStep === steps.length - 1 ? (
                            <button
                                onClick={() => { onComplete(); onNext(); }}
                                className="px-6 py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 transition-colors focus:ring-4 focus:ring-purple-300"
                            >
                                Continue to Exemplars ‚Üí
                            </button>
                        ) : (
                            <button
                                onClick={() => setCurrentStep(currentStep + 1)}
                                aria-label="Next step"
                                className="px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 transition-colors"
                            >
                                Next ‚Üí
                            </button>
                        )}
                    </div>
                </div>
            );
        }

        // EXEMPLARS SECTION
        function ExemplarsSection({ philosophers, completedViews, setCompletedViews, onComplete, onNext }) {
            const [selectedPhil, setSelectedPhil] = useState(null);
            const philosopherList = Object.keys(philosophers);
            const allViewed = philosopherList.every(p => completedViews.has(p));

            if (selectedPhil) {
                const phil = philosophers[selectedPhil];
                return (
                    <div className="bg-white rounded-lg shadow-lg p-8">
                        <button
                            onClick={() => setSelectedPhil(null)}
                            className="mb-4 px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg"
                        >
                            ‚Üê Back to All
                        </button>

                        <div className="flex items-center space-x-4 mb-6">
                            <div className="text-6xl">{phil.image}</div>
                            <div>
                                <h2 className="text-3xl font-bold text-gray-900">{phil.name}</h2>
                                <p className="text-lg text-gray-600">{phil.era}</p>
                                <p className="text-md text-purple-600 font-semibold">{phil.region}</p>
                            </div>
                        </div>

                        <div className="bg-gradient-to-br from-purple-50 to-blue-50 border-2 border-purple-200 rounded-lg p-6 mb-6">
                            <h3 className="text-2xl font-bold text-purple-900 mb-4">Coherence Requirements</h3>
                            <p className="text-gray-700 mb-4">
                                <strong>When This Works:</strong> {phil.whenWorks}
                            </p>
                            <p className="text-gray-700 mb-4">
                                <strong>When This Fails:</strong> {phil.whenFails}
                            </p>
                            
                            <div className="grid md:grid-cols-5 gap-3 mt-4">
                                {Object.entries(phil.coherenceRequirements).map(([key, req]) => {
                                    const colors = {
                                        'very-high': 'bg-red-100 border-red-400 text-red-900',
                                        'high': 'bg-orange-100 border-orange-400 text-orange-900',
                                        'moderate': 'bg-yellow-100 border-yellow-400 text-yellow-900',
                                        'low': 'bg-green-100 border-green-400 text-green-900'
                                    };
                                    return (
                                        <div key={key} className={`border-2 rounded p-3 ${colors[req.level]}`} title={req.note}>
                                            <div className="font-bold text-center mb-1">{key}</div>
                                            <div className="text-xs text-center">{req.level}</div>
                                        </div>
                                    );
                                })}
                            </div>
                            <p className="text-xs text-gray-600 mt-3 italic">Hover over each dimension to see why it's required</p>
                        </div>

                        <div className="bg-gradient-to-br from-purple-50 to-blue-50 border-2 border-purple-200 rounded-lg p-6 mb-6">
                            <h3 className="text-2xl font-bold text-purple-900 mb-4">Formal Model</h3>
                            <div className="space-y-3">
                                {Object.entries(phil.model).map(([key, value]) => (
                                    <div key={key} className="bg-white p-3 rounded-lg">
                                        <span className="bg-purple-100 text-purple-900 font-mono text-xs px-2 py-1 rounded mr-2">
                                            {key}
                                        </span>
                                        {Array.isArray(value) ? (
                                            <ul className="text-sm text-gray-700 mt-2">
                                                {value.map((v, i) => <li key={i}>‚Ä¢ {v}</li>)}
                                            </ul>
                                        ) : (
                                            <span className="text-sm text-gray-700">{value}</span>
                                        )}
                                    </div>
                                ))}
                            </div>
                        </div>

                        <div className="grid md:grid-cols-2 gap-4 mb-6">
                            <div className="bg-green-50 p-4 rounded-lg">
                                <h4 className="font-bold text-green-900 mb-2">Key Insights</h4>
                                <ul className="text-sm text-gray-700 space-y-1">
                                    {phil.keyInsights.map((insight, i) => <li key={i}>‚Ä¢ {insight}</li>)}
                                </ul>
                            </div>
                            <div className="bg-yellow-50 p-4 rounded-lg">
                                <h4 className="font-bold text-yellow-900 mb-2">Limitations</h4>
                                <ul className="text-sm text-gray-700 space-y-1">
                                    {phil.limitations.map((limit, i) => <li key={i}>‚Ä¢ {limit}</li>)}
                                </ul>
                            </div>
                        </div>

                        <button
                            onClick={() => setSelectedPhil(null)}
                            className="w-full px-6 py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700"
                        >
                            View All Philosophers
                        </button>
                    </div>
                );
            }

            return (
                <div className="bg-white rounded-lg shadow-lg p-8">
                    <h2 className="text-3xl font-bold text-gray-900 mb-4">Philosopher Exemplars</h2>
                    <p className="text-lg text-gray-700 mb-6">
                        Study these diverse thinkers to see how different standpoints reveal different aspects of reality.
                    </p>

                    <div className="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6">
                        <p className="text-sm">
                            Progress: {completedViews.size} of {philosopherList.length} viewed
                            {allViewed && " ‚úì All viewed!"}
                        </p>
                    </div>

                    <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                        {philosopherList.map(philKey => {
                            const phil = philosophers[philKey];
                            const viewed = completedViews.has(philKey);
                            
                            return (
                                <div
                                    key={philKey}
                                    className={`border-2 rounded-lg p-6 ${viewed ? 'border-green-400' : 'border-gray-300'}`}
                                >
                                    <div className="text-center mb-4">
                                        <div className="text-5xl mb-3">{phil.image}</div>
                                        <h3 className="text-xl font-bold">{phil.name}</h3>
                                        <p className="text-sm text-gray-600">{phil.era}</p>
                                        <p className="text-xs text-purple-600 font-semibold">{phil.region}</p>
                                    </div>
                                    <button
                                        onClick={() => {
                                            setSelectedPhil(philKey);
                                            setCompletedViews(new Set([...completedViews, philKey]));
                                        }}
                                        className={`w-full px-4 py-2 rounded-lg font-semibold ${
                                            viewed ? 'bg-green-100 text-green-700' : 'bg-purple-600 text-white hover:bg-purple-700'
                                        }`}
                                    >
                                        {viewed ? '‚úì View Again' : 'View Model'}
                                    </button>
                                </div>
                            );
                        })}
                    </div>

                    {allViewed && (
                        <button
                            onClick={() => { onComplete(); onNext(); }}
                            className="w-full px-6 py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700"
                        >
                            Continue to Comparative Analysis ‚Üí
                        </button>
                    )}
                </div>
            );
        }

        // OS1 DEEP DIVE COMPONENT
        function OS1DeepDive({ phil1Key, phil2Key, p1, p2 }) {
            const getOS1Analysis = (phil) => {
                const spts = Array.isArray(phil.model.SPTS) ? phil.model.SPTS : [phil.model.SPTS];
                const primarySPTS = spts[0] || "their position";
                
                return {
                    canSee: phil.model.PRS_t,
                    blindSpots: phil.whatExcluded,
                    standpoint: primarySPTS,
                    filters: phil.model.BROAPlus
                };
            };

            const os1_p1 = getOS1Analysis(p1);
            const os1_p2 = getOS1Analysis(p2);

            return (
                <div className="space-y-6 mb-6 fade-in">
                    <div className="bg-gradient-to-br from-indigo-100 to-purple-100 border-2 border-indigo-400 rounded-lg p-6">
                        <h3 className="text-2xl font-bold text-indigo-900 mb-4">üîç OS1 DEEP DIVE: Why They'd Disagree</h3>
                        <p className="text-gray-700">
                            This shows how each philosopher's lived experience (OS1) shapes what they can see‚Äîand why they'd disagree.
                        </p>
                    </div>

                    <div className="bg-white border-2 border-gray-300 rounded-lg p-6">
                        <h4 className="text-xl font-bold text-gray-900 mb-4">What Each Can See</h4>
                        
                        <div className="grid md:grid-cols-2 gap-6">
                            <div className="bg-blue-50 p-4 rounded-lg">
                                <h5 className="font-bold text-blue-900 mb-3">{p1.name}'s Standpoint</h5>
                                <p className="text-sm text-gray-700"><strong>From:</strong> {os1_p1.standpoint}</p>
                                <p className="text-sm text-gray-700 mt-2"><strong>Sees:</strong> {os1_p1.canSee}</p>
                                <p className="text-xs text-red-700 mt-2"><strong>Misses:</strong> {os1_p1.blindSpots}</p>
                            </div>

                            <div className="bg-purple-50 p-4 rounded-lg">
                                <h5 className="font-bold text-purple-900 mb-3">{p2.name}'s Standpoint</h5>
                                <p className="text-sm text-gray-700"><strong>From:</strong> {os1_p2.standpoint}</p>
                                <p className="text-sm text-gray-700 mt-2"><strong>Sees:</strong> {os1_p2.canSee}</p>
                                <p className="text-xs text-red-700 mt-2"><strong>Misses:</strong> {os1_p2.blindSpots}</p>
                            </div>
                        </div>
                    </div>

                    <div className="bg-white border-2 border-gray-300 rounded-lg p-6">
                        <h4 className="text-xl font-bold text-gray-900 mb-4">Coherence Requirements Comparison</h4>
                        
                        <div className="overflow-x-auto">
                            <table className="w-full text-sm">
                                <thead>
                                    <tr className="border-b-2 border-gray-300">
                                        <th className="text-left p-2">Dimension</th>
                                        <th className="text-center p-2">{p1.name}</th>
                                        <th className="text-center p-2">{p2.name}</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {['BRC', 'KIC', 'CIC', 'ISC', 'TNC'].map(dim => {
                                        const req1 = p1.coherenceRequirements[dim];
                                        const req2 = p2.coherenceRequirements[dim];
                                        const levelColors = {
                                            'very-high': 'bg-red-100',
                                            'high': 'bg-orange-100',
                                            'moderate': 'bg-yellow-100',
                                            'low': 'bg-green-100'
                                        };
                                        return (
                                            <tr key={dim} className="border-b border-gray-200">
                                                <td className="p-2 font-bold">{dim}</td>
                                                <td className={`p-2 text-center ${levelColors[req1.level]}`} title={req1.note}>
                                                    {req1.level}
                                                </td>
                                                <td className={`p-2 text-center ${levelColors[req2.level]}`} title={req2.note}>
                                                    {req2.level}
                                                </td>
                                            </tr>
                                        );
                                    })}
                                </tbody>
                            </table>
                        </div>

                        <div className="mt-4 grid md:grid-cols-2 gap-4">
                            <div className="bg-blue-50 p-4 rounded">
                                <h5 className="font-bold text-blue-900 mb-2">{p1.name} Works When:</h5>
                                <p className="text-xs text-gray-700">{p1.whenWorks}</p>
                            </div>
                            <div className="bg-purple-50 p-4 rounded">
                                <h5 className="font-bold text-purple-900 mb-2">{p2.name} Works When:</h5>
                                <p className="text-xs text-gray-700">{p2.whenWorks}</p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // COMPARISON SECTION
        function ComparisonSection({ philosophers, comparisonPair, setComparisonPair, onComplete, onNext }) {
            const [phil1, setPhil1] = useState(comparisonPair[0]);
            const [phil2, setPhil2] = useState(comparisonPair[1]);
            const [showAnalysis, setShowAnalysis] = useState(false);
            const [showDeepDive, setShowDeepDive] = useState(false);
            const philosopherList = Object.keys(philosophers);

            if (showAnalysis && phil1 && phil2) {
                const p1 = philosophers[phil1];
                const p2 = philosophers[phil2];

                return (
                    <div className="bg-white rounded-lg shadow-lg p-8">
                        <button
                            onClick={() => { setShowAnalysis(false); setShowDeepDive(false); }}
                            className="mb-4 px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg"
                        >
                            ‚Üê Choose Different Pair
                        </button>

                        <h2 className="text-3xl font-bold text-gray-900 mb-6">Comparative Analysis</h2>

                        <div className="grid md:grid-cols-2 gap-6 mb-8">
                            <div className="bg-blue-50 border-2 border-blue-300 rounded-lg p-6 text-center">
                                <div className="text-5xl mb-3">{p1.image}</div>
                                <h3 className="text-2xl font-bold">{p1.name}</h3>
                                <p className="text-sm text-gray-600">{p1.era}</p>
                            </div>
                            <div className="bg-purple-50 border-2 border-purple-300 rounded-lg p-6 text-center">
                                <div className="text-5xl mb-3">{p2.image}</div>
                                <h3 className="text-2xl font-bold">{p2.name}</h3>
                                <p className="text-sm text-gray-600">{p2.era}</p>
                            </div>
                        </div>

                        {!showDeepDive && (
                            <button
                                onClick={() => setShowDeepDive(true)}
                                className="w-full mb-6 px-6 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700"
                            >
                                üîç OS1 Deep Dive: Why They'd Disagree
                            </button>
                        )}

                        {showDeepDive && <OS1DeepDive phil1Key={phil1} phil2Key={phil2} p1={p1} p2={p2} />}

                        <div className="flex space-x-4 mt-6">
                            <button
                                onClick={() => { setShowAnalysis(false); setShowDeepDive(false); }}
                                className="flex-1 px-6 py-3 bg-gray-300 hover:bg-gray-400 rounded-lg font-semibold"
                            >
                                Compare Different Pair
                            </button>
                            <button
                                onClick={() => { onComplete(); onNext(); }}
                                className="flex-1 px-6 py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700"
                            >
                                Continue to Modeling ‚Üí
                            </button>
                        </div>
                    </div>
                );
            }

            return (
                <div className="bg-white rounded-lg shadow-lg p-8">
                    <h2 className="text-3xl font-bold text-gray-900 mb-4">Comparative Analysis Tool</h2>
                    
                    <div className="grid md:grid-cols-2 gap-8 mb-8">
                        <div>
                            <h3 className="text-xl font-bold mb-4">Select First Philosopher</h3>
                            <div className="space-y-3">
                                {philosopherList.map(philKey => {
                                    const phil = philosophers[philKey];
                                    return (
                                        <button
                                            key={philKey}
                                            onClick={() => setPhil1(philKey)}
                                            className={`w-full text-left p-4 rounded-lg border-2 ${
                                                phil1 === philKey ? 'border-blue-500 bg-blue-50' : 'border-gray-300'
                                            }`}
                                        >
                                            <div className="flex items-center space-x-3">
                                                <span className="text-3xl">{phil.image}</span>
                                                <span className="font-semibold">{phil.name}</span>
                                            </div>
                                        </button>
                                    );
                                })}
                            </div>
                        </div>

                        <div>
                            <h3 className="text-xl font-bold mb-4">Select Second Philosopher</h3>
                            <div className="space-y-3">
                                {philosopherList.map(philKey => {
                                    const phil = philosophers[philKey];
                                    return (
                                        <button
                                            key={philKey}
                                            onClick={() => setPhil2(philKey)}
                                            className={`w-full text-left p-4 rounded-lg border-2 ${
                                                phil2 === philKey ? 'border-purple-500 bg-purple-50' : 'border-gray-300'
                                            }`}
                                        >
                                            <div className="flex items-center space-x-3">
                                                <span className="text-3xl">{phil.image}</span>
                                                <span className="font-semibold">{phil.name}</span>
                                            </div>
                                        </button>
                                    );
                                })}
                            </div>
                        </div>
                    </div>

                    <button
                        onClick={() => {
                            if (phil1 && phil2 && phil1 !== phil2) {
                                setComparisonPair([phil1, phil2]);
                                setShowAnalysis(true);
                            }
                        }}
                        disabled={!phil1 || !phil2 || phil1 === phil2}
                        className={`w-full px-6 py-3 rounded-lg font-semibold ${
                            phil1 && phil2 && phil1 !== phil2
                                ? 'bg-purple-600 text-white hover:bg-purple-700'
                                : 'bg-gray-300 text-gray-500'
                        }`}
                    >
                        Compare These Philosophers ‚Üí
                    </button>
                </div>
            );
        }

        // TOULMIN + COHERENCE INTEGRATION SECTION
        function ToulminCoherenceSection({ onComplete, onNext }) {
            const [currentStep, setCurrentStep] = useState(0);
            const [practiceAnswers, setPracticeAnswers] = useState({});

            const steps = [
                {
                    title: "The Integration: Why Toulmin + Coherence?",
                    content: (
                        <div className="space-y-4">
                            <p className="text-gray-700 text-lg">
                                Toulmin analysis breaks arguments into 6 components. But <strong>when do those components work?</strong>
                            </p>
                            <div className="bg-gradient-to-br from-purple-100 to-blue-100 border-2 border-purple-300 rounded-lg p-6">
                                <h4 className="font-bold text-purple-900 mb-3">The Key Insight</h4>
                                <p className="text-gray-700">
                                    Each Toulmin component requires specific coherence conditions to function. When those conditions break down,
                                    that part of the argument becomes inaccessible‚Äînot because it's wrong, but because you lack the capacity to process it.
                                </p>
                            </div>
                            <div className="bg-yellow-50 border-l-4 border-yellow-500 p-4">
                                <p className="text-sm text-gray-700">
                                    <strong>Example:</strong> You can have perfect evidence (Grounds), but if you're sleep-deprived (BRC breakdown),
                                    you literally can't process it. The argument isn't bad‚Äîyour coherence state makes it invisible.
                                </p>
                            </div>
                        </div>
                    )
                },
                {
                    title: "Mapping Toulmin to Coherence",
                    content: (
                        <div className="space-y-4">
                            <div className="space-y-3">
                                {[
                                    { component: "GROUNDS (Evidence)", coherence: "BRC + CIC", explanation: "Requires regulated perception and cognitive capacity", breakdown: "Sleep-deprived? Can't accurately perceive evidence.", color: "blue" },
                                    { component: "WARRANT (Reasoning Link)", coherence: "CIC", explanation: "Requires cognitive capacity for logical reasoning", breakdown: "Overloaded? Can't connect evidence to claim.", color: "yellow" },
                                    { component: "BACKING (Support)", coherence: "ISC + Cons", explanation: "Requires institutional support and traditions", breakdown: "Traditions lost? Warrants don't resonate.", color: "green" },
                                    { component: "QUALIFIER (Confidence)", coherence: "ALL dimensions", explanation: "More intact dimensions = higher justified confidence", breakdown: "Breakdowns make confidence assessment impossible.", color: "purple" },
                                    { component: "REBUTTALS (Counterarguments)", coherence: "TNC + KIC", explanation: "Requires time and stable identity to hear challenges", breakdown: "Identity threat? Can't hear objections.", color: "orange" },
                                    { component: "CLAIM (Conclusion)", coherence: "Depends on all above", explanation: "Accessibility depends on upstream components", breakdown: "If components fail, claim becomes inaccessible.", color: "red" }
                                ].map((item, i) => (
                                    <div key={i} className={`border-2 rounded-lg p-4 border-${item.color}-400 bg-${item.color}-50`}>
                                        <h5 className="font-bold text-gray-900 mb-2">{item.component}</h5>
                                        <p className="text-sm text-gray-700 mb-2"><strong>Requires:</strong> {item.coherence}</p>
                                        <p className="text-sm text-gray-600 mb-2">{item.explanation}</p>
                                        <p className="text-xs text-red-700 italic"><strong>Breakdown:</strong> {item.breakdown}</p>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )
                },
                {
                    title: "Practice: Diagnose Coherence Breakdowns",
                    content: (
                        <div className="space-y-6">
                            <div className="bg-blue-50 border-2 border-blue-400 rounded-lg p-6">
                                <h4 className="font-bold text-blue-900 mb-3">Scenario</h4>
                                <p className="text-gray-700">A student works 50 hours/week, takes 15 credits, gets 4 hours sleep. High stress. Reads Kant but it "doesn't make sense."</p>
                            </div>
                            <div className="space-y-4">
                                <div>
                                    <h5 className="font-bold mb-2">Compromised dimensions?</h5>
                                    {['BRC', 'KIC', 'CIC', 'ISC', 'TNC'].map(dim => (
                                        <label key={dim} className="flex items-center space-x-2 mb-2">
                                            <input type="checkbox" checked={practiceAnswers.dimensions?.includes(dim)} onChange={(e) => { const current = practiceAnswers.dimensions || []; setPracticeAnswers({ ...practiceAnswers, dimensions: e.target.checked ? [...current, dim] : current.filter(d => d !== dim) }); }} />
                                            <span>{dim}</span>
                                        </label>
                                    ))}
                                </div>
                                {(practiceAnswers.dimensions?.length > 0) && (
                                    <div className="bg-green-50 border-2 border-green-400 rounded-lg p-4">
                                        <h5 className="font-bold text-green-900 mb-2">Answer Key:</h5>
                                        <p className="text-sm text-gray-700"><strong>Compromised:</strong> BRC (sleep), CIC (overload), TNC (no time).</p>
                                        <p className="text-sm text-gray-700 mt-2">Kant requires very high CIC. Under these conditions, the categorical imperative is inaccessible‚Äînot because the student is incapable, but because their coherence state is compromised.</p>
                                    </div>
                                )}
                            </div>
                        </div>
                    )
                }
            ];

            return (
                <div className="bg-white rounded-lg shadow-lg p-8">
                    <h2 className="text-3xl font-bold text-gray-900 mb-4">Toulmin + Coherence Integration</h2>
                    <div className="flex space-x-2 mb-6">
                        {steps.map((step, idx) => (
                            <button key={idx} onClick={() => setCurrentStep(idx)} className={`px-4 py-2 rounded-lg font-semibold transition-colors ${currentStep === idx ? 'bg-purple-600 text-white' : 'bg-gray-200 hover:bg-gray-300'}`}>Step {idx + 1}</button>
                        ))}
                    </div>
                    <div className="bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-purple-200 rounded-lg p-6 mb-6">
                        <h3 className="text-2xl font-bold text-purple-900 mb-4">{steps[currentStep].title}</h3>
                        {steps[currentStep].content}
                    </div>
                    <div className="flex justify-between">
                        <button onClick={() => setCurrentStep(Math.max(0, currentStep - 1))} disabled={currentStep === 0} className="px-6 py-3 rounded-lg font-semibold bg-gray-300 hover:bg-gray-400 disabled:opacity-50">‚Üê Previous</button>
                        {currentStep === steps.length - 1 ? (
                            <button onClick={() => { onComplete(); onNext(); }} className="px-6 py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700">Continue to Modeling ‚Üí</button>
                        ) : (
                            <button onClick={() => setCurrentStep(currentStep + 1)} className="px-6 py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700">Next ‚Üí</button>
                        )}
                    </div>
                </div>
            );
        }

        // ARGUMENT ANALYSIS SECTION
        function ArgumentAnalysisSection({ philosophers, onComplete, onNext }) {
            const [selectedPhil, setSelectedPhil] = useState(null);
            const philosopherList = Object.keys(philosophers);

            if (selectedPhil) {
                const phil = philosophers[selectedPhil];
                const arg = phil.toulminArguments[0];

                return (
                    <div className="bg-white rounded-lg shadow-lg p-8">
                        <button onClick={() => setSelectedPhil(null)} className="mb-4 px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg">‚Üê Back</button>
                        <div className="flex items-center space-x-4 mb-6">
                            <div className="text-6xl">{phil.image}</div>
                            <div>
                                <h2 className="text-3xl font-bold text-gray-900">{phil.name}</h2>
                                <p className="text-lg text-gray-600">Toulmin Argument</p>
                            </div>
                        </div>
                        <div className="space-y-6">
                            <div className="bg-blue-50 border-2 border-blue-400 rounded-lg p-6">
                                <h3 className="text-xl font-bold text-blue-900 mb-2">üìç CLAIM</h3>
                                <p className="text-gray-800 font-semibold">{arg.claim}</p>
                            </div>
                            <div className="bg-green-50 border-2 border-green-300 rounded-lg p-6">
                                <h3 className="text-xl font-bold text-green-900 mb-3">üîç GROUNDS</h3>
                                <ul className="space-y-2">{arg.grounds.map((g, i) => <li key={i} className="text-gray-700">‚Ä¢ {g}</li>)}</ul>
                            </div>
                            <div className="bg-purple-50 border-2 border-purple-300 rounded-lg p-6">
                                <h3 className="text-xl font-bold text-purple-900 mb-3">üîó WARRANT</h3>
                                <p className="text-gray-800">{arg.warrant}</p>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="bg-white rounded-lg shadow-lg p-8">
                    <h2 className="text-3xl font-bold text-gray-900 mb-4">Argument Analysis</h2>
                    <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                        {philosopherList.map(philKey => {
                            const phil = philosophers[philKey];
                            return (
                                <div key={philKey} className="border-2 border-gray-300 rounded-lg p-6 text-center">
                                    <div className="text-5xl mb-3">{phil.image}</div>
                                    <h3 className="text-xl font-bold">{phil.name}</h3>
                                    <button onClick={() => setSelectedPhil(philKey)} className="mt-4 w-full px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700">View Argument</button>
                                </div>
                            );
                        })}
                    </div>
                    <button onClick={() => { onComplete(); onNext(); }} className="w-full px-6 py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700">Continue to Synthesis ‚Üí</button>
                </div>
            );
        }

        // SYNTHESIS SECTION
        function SynthesisSection({ studentInfo, sessionData, onComplete }) {
            const [reflections, setReflections] = useState({ patterns: '', osInsight: '', application: '', coherenceReflection: '', personalGrowth: '' });
            const [showCert, setShowCert] = useState(false);
            const allComplete = Object.values(reflections).every(r => r.length >= 20);

            const downloadCertificate = () => {
                const cert = `CERTIFICATE OF COMPLETION\nEthical Reasoning for the Information Age\n\nStudent: ${studentInfo.name}\nDate: ${new Date().toLocaleDateString()}\n\nVerified: OS1/OS2 Framework, Coherence Dimensions, Toulmin Analysis.`;
                const blob = new Blob([cert], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'Certificate.txt';
                a.click();
            };

            if (showCert) {
                return (
                    <div className="bg-white rounded-lg shadow-lg p-8 text-center">
                        <div className="text-6xl mb-4">üéì</div>
                        <h2 className="text-4xl font-bold text-gray-900 mb-4">Congratulations!</h2>
                        <button onClick={downloadCertificate} className="bg-purple-600 text-white py-4 px-6 rounded-lg font-semibold text-lg hover:bg-purple-700">Download Certificate</button>
                    </div>
                );
            }

            return (
                <div className="bg-white rounded-lg shadow-lg p-8">
                    <h2 className="text-3xl font-bold text-gray-900 mb-4">Synthesis & Reflection</h2>
                    <div className="space-y-6 mb-8">
                        {Object.keys(reflections).map((key, i) => (
                            <div key={key}>
                                <h4 className="font-bold mb-2 capitalize">{key.replace(/([A-Z])/g, ' $1')}</h4>
                                <textarea className="w-full px-4 py-3 border rounded-lg" rows="3" value={reflections[key]} onChange={(e) => setReflections({...reflections, [key]: e.target.value})} placeholder="Reflect here..." />
                            </div>
                        ))}
                    </div>
                    {allComplete && <button onClick={() => { onComplete(); setShowCert(true); }} className="w-full px-6 py-4 bg-purple-600 text-white rounded-lg font-semibold text-lg hover:bg-purple-700">Complete & Generate Certificate üéì</button>}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
